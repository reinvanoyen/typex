var that=this;function __skpm_run(e,t){that.context=t;var r=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/advanced-json-export.js")}({"./src/advanced-json-export.js":
/*!*************************************!*\
  !*** ./src/advanced-json-export.js ***!
  \*************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n=r(/*! ./util/ui */"./src/util/ui.js"),a=r(/*! ./util/string */"./src/util/string.js"),i=r(/*! ./util/export */"./src/util/export.js"),o=r(/*! ./util/sketch */"./src/util/sketch.js");t.default=function(e){n.default.createSettingsDialog(e,{title:"JSON export",informativeText:"Export text styles in JSON format"},[{type:"multicheckbox",id:"excludeProps",label:"Exclude properties (merges text styles)",values:["Color","Line height"]},{type:"select",id:"cssUnit",options:["No unit","px","em","rem"],label:"Css unit"},{type:"text",id:"scalingFactor",value:1,label:"Size scaling factor"},{type:"text",id:"maxDecimalPlaces",value:2,label:"Maximal decimal places"},{type:"text",id:"propertyNamingPrefix",value:"type",label:"JSON Property naming prefix"},{type:"select",id:"propertyNamingConvention",options:["Numeric","Text style name"],label:"JSON Property naming convention"}],function(t){t.propertyNamingConvention=t.propertyNamingConvention||"Numeric",t.cssUnit="No unit"===t.cssUnit?0:t.cssUnit;var r=[];t.excludeProps.Color&&r.push("color"),t.excludeProps["Line height"]&&r.push("lineHeight");var l=o.default.getTextStyles(e);l=i.default.sortTextStyles(l),l=i.default.excludeTextStyleProperties(l,r);var c={};(l=i.default.removeDoubleTextStyles(l)).forEach(function(e,r){var n=a.default.slugify(e.name),o=t.propertyNamingPrefix+"-"+("Numeric"===t.propertyNamingConvention?r+1:n);c[o]=i.default.createCssProps(e,t)}),n.default.createSavePanel("typex-text-styles.json",JSON.stringify(c))})}},"./src/util/export.js":
/*!****************************!*\
  !*** ./src/util/export.js ***!
  \****************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n=r(/*! ./util */"./src/util/util.js"),a=r(/*! ./number */"./src/util/number.js"),i={sortTextStyles:function(e){return e.sort(function(e,t){return e.fontSize-t.fontSize}),e},excludeTextStyleProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach(function(e){t.forEach(function(t){e[t]&&delete e[t]})}),e},removeDoubleTextStyles:function(e){var t={},r=[];return e.forEach(function(e,a){var i=n.default.createTextStyleId(e);t[i]||(t[i]=!0,r.push(e))}),r},createCssProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.cssUnit=t.cssUnit||0,t.scalingFactor=t.scalingFactor||1,t.maxDecimalPlaces=t.maxDecimalPlaces||2;var r={};r["font-family"]=e.fontFamily,r["font-weight"]=400,r["text-transform"]="none";var n=e.fontFamily.split("-"),o={Thin:100,Light:300,Regular:400,Medium:500,Bold:700,Black:900};return n[1]&&o[n[1]]&&(r["font-family"]=n[0],r["font-weight"]=o[n[1]]),r["font-size"]=a.default.parseFloatMaxDecimal(t.scalingFactor*e.fontSize,t.maxDecimalPlaces)+t.cssUnit,r["letter-spacing"]=a.default.parseFloatMaxDecimal(t.scalingFactor*e.letterSpacing,t.maxDecimalPlaces)+t.cssUnit,1===e.textTransform&&(r["text-transform"]="uppercase"),2===e.textTransform&&(r["text-transform"]="lowercase"),e.lineHeight&&(r["line-height"]=a.default.parseFloatMaxDecimal(1+(e.lineHeight-e.fontSize)/e.lineHeight,t.maxDecimalPlaces)),e.color&&(r.color=i.createRgbaString(e.color)),r},createRgbaString:function(e){return"rgba("+i.createColorValue(e.r)+","+i.createColorValue(e.g)+","+i.createColorValue(e.b)+","+e.a+")"},createColorValue:function(e){return Math.round(255*e)},createStyleBlock:function(e){var t="";for(var r in e)t+="\t"+r+": "+e[r]+";\n";return t},createInlineStyleString:function(e){var t="";for(var r in e)t+=r+": "+e[r]+"; ";return t},createHtmlFontbook:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r='\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="utf-8">\n        <title>Typex text styles</title>\n      </head>\n      <body style="padding: 0; margin: 0;">\n    ';return e.forEach(function(e,a){n.default.createTextStyleId(e);var o,l=i.createCssProps(e,t),c=i.createInlineStyleString(l);o="Numeric"===t.textStyleNamingConvention?t.textStyleNamingPrefix+" "+(a+1):"Text style name"===t.textStyleNamingConvention?t.textStyleNamingPrefix+" "+e.name:t.textStyleNamingPrefix+" "+(a+1)+" ("+e.name+")",r+='\n        <div style="box-shadow: 0 5px 15px #f0f0f0; padding: 25px 50px; border-bottom: 1px solid #ccc;">\n          <div style="font-family: Helvetica, Arial, Sans-Serif; font-size: 14px; margin-bottom: 15px;">\n            <span>'.concat(a+1,".</span>\n            <span>\n              ").concat(o,'\n            </span>\n            <span style="color: #ccc;">\n              ').concat(c,'\n            </span>\n          </div>\n          <div style="').concat(c,';">').concat(t.previewText,"</div>\n        </div>\n      ")}),r+="\n      </body>\n      </html>\n    "}};t.default=i},"./src/util/number.js":
/*!****************************!*\
  !*** ./src/util/number.js ***!
  \****************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n={parseFloatMaxDecimal:function(e,t){return Number(e.toFixed(t).replace(/[.,]00$/,""))}};t.default=n},"./src/util/sketch.js":
/*!****************************!*\
  !*** ./src/util/sketch.js ***!
  \****************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n={getTextStyles:function(e){var t=[];e.document.documentData().layerTextStyles().objects().forEach(function(e,r){t.push({attributes:e.style().textStyle().attributes(),textStyle:e,name:e.name()})});var r=[];return t.forEach(function(e){var t={};t.name=e.name,t.fontFamily=String(e.attributes.NSFont.fontDescriptor().objectForKey(NSFontNameAttribute)),t.fontSize=e.attributes.NSFont.fontDescriptor().objectForKey(NSFontSizeAttribute),t.paragraph=e.attributes.NSParagraphStyle,t.paragraph&&(t.lineHeight=t.paragraph.maximumLineHeight());var n=e.attributes.MSAttributedStringColorAttribute;if(n){var a=n.red(),i=n.green(),o=n.blue(),l=n.alpha();t.color={r:a,g:i,b:o,a:l}}t.letterSpacing=e.attributes.NSKern||0,t.textTransform=parseInt(e.attributes.MSAttributedStringTextTransformAttribute||0),r.push(t)}),r}};t.default=n},"./src/util/string.js":
/*!****************************!*\
  !*** ./src/util/string.js ***!
  \****************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n={slugify:function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",r=0,n=t.length;r<n;r++)e=e.replace(new RegExp(t.charAt(r),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(r));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}};t.default=n},"./src/util/ui.js":
/*!************************!*\
  !*** ./src/util/ui.js ***!
  \************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n={createSavePanel:function(e,t){var r=NSSavePanel.savePanel();if(r.setNameFieldStringValue(e),r.setAllowsOtherFileTypes(!1),r.setExtensionHidden(!1),r.runModal()){var n=NSString.stringWithString(t),a=r.URL().path();n.writeToFile_atomically_encoding_error(a,!0,NSUTF8StringEncoding,null)}},createLabel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=NSTextField.alloc().init();return t.setStringValue(e),t.setFont(NSFont.boldSystemFontOfSize(12)),t.setBezeled(!1),t.setDrawsBackground(!1),t.setEditable(!1),t.setSelectable(!1),t},createTextField:function(e){var t=NSTextField.alloc().init();return t.setStringValue(e),t},createSelect:function(e){var t=NSPopUpButton.alloc().init();return t.addItemsWithTitles(e),t.selectItemAtIndex(0),t},createStepper:function(e){return NSStepper.alloc().init()},createCheckbox:function(e){var t=NSButton.alloc().init();return t.setButtonType(NSSwitchButton),t.title=e,t},createSettingsDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;t.title=t.title||"Alert",t.informativeText=t.informativeText||"",t.cancelBtnText=t.cancelBtnText||"Cancel",t.confirmBtnText=t.confirmBtnText||"Ok";var i=NSAlert.alloc().init(),o=e.plugin.urlForResourceNamed("icon.png").path(),l=NSImage.alloc().initByReferencingFile(o);i.setIcon(l),i.setMessageText(t.title),i.setInformativeText(t.informativeText);i.addButtonWithTitle(t.confirmBtnText),i.addButtonWithTitle(t.cancelBtnText);var c=NSGridView.alloc().init(),s={},u=0;if(r.forEach(function(e){var t,r;switch(e.type){case"text":t=n.createLabel(e.label),r=n.createTextField(e.value),u+=30,c.addRowWithViews([t,r]);break;case"stepper":t=n.createLabel(e.label),r=n.createStepper(e.value),u+=30,c.addRowWithViews([t,r]);break;case"checkbox":t=n.createLabel(e.label),r=n.createCheckbox(),u+=30,c.addRowWithViews([t,r]);break;case"multicheckbox":r=[],e.values.forEach(function(a,i){t=i?n.createLabel():n.createLabel(e.label);var o=n.createCheckbox(a);u+=30,r.push(o),c.addRowWithViews([t,o])});break;case"select":t=n.createLabel(e.label),r=n.createSelect(e.options),u+=36,c.addRowWithViews([t,r])}s[e.id]=r}),i.accessoryView=c,c.columnSpacing=30,c.rowSpacing=8,c.frame=NSMakeRect(0,0,400,u),1e3===i.runModal()){var f={};return r.forEach(function(e){switch(e.type){case"text":f[e.id]=s[e.id].stringValue();break;case"select":f[e.id]=e.options[s[e.id].indexOfSelectedItem()];break;case"checkbox":break;case"multicheckbox":var t={};e.values.forEach(function(r,n){t[r]=1===s[e.id][n].state()}),f[e.id]=t}}),void a(f)}return i}};t.default=n},"./src/util/util.js":
/*!**************************!*\
  !*** ./src/util/util.js ***!
  \**************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);t.default={createTextStyleId:function(e){var t="";return t+=e.fontFamily,t+="-"+e.fontSize,t+="-"+e.letterSpacing,t+="-"+e.textTransform,e.lineHeight&&(t+="-"+e.lineHeight),e.color&&(t+="-"+e.color.r+"-"+e.color.g+"-"+e.color.b+"-"+e.color.a),t}}}});"default"===e&&"function"==typeof r?r(t):r[e](t)}that.onRun=__skpm_run.bind(this,"default");