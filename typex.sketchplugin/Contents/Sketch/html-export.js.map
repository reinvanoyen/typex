{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/html-export.js","webpack://exports/./src/ui.js"],"names":["context","createExportSettingsWindow","exportOpts","createSavePanel","uniqueTextStyles","parseTextStyles","texts","document","documentData","layerTextStyles","objects","rawTextStyles","forEach","text","i","push","attributes","style","textStyle","name","textStyles","rawTextStyle","fontFamily","NSFont","fontDescriptor","objectForKey","NSFontNameAttribute","fontSize","NSFontSizeAttribute","paragraph","NSParagraphStyle","lineHeight","maximumLineHeight","letterSpacing","NSKern","textTransform","parseInt","MSAttributedStringTextTransformAttribute","sort","a","b","createTextStyleId","textStyleId","createCssProps","cssUnit","scalingFactor","cssProps","fontParts","split","fontWeightMap","parseFloat","toFixed","createHtml","output","uniqueId","inlineStyleString","createInlineStyleString","previewText","styleString","prop","cb","cssUnits","alert","NSAlert","alloc","init","view","NSView","alertIconPath","plugin","urlForResourceNamed","path","alertIcon","NSImage","initByReferencingFile","setIcon","setMessageText","setInformativeText","labelPreviewText","createLabel","fieldPreviewText","createField","labelScalingFactor","fieldScalingFactor","labelCssUnit","selectCssUnit","createSelect","btnExport","addButtonWithTitle","btnCancel","frame","NSMakeRect","getCurrentOffset","accessoryView","responseCode","runModal","indexOfSelectedItem","stringValue","replace","save","NSSavePanel","savePanel","setNameFieldStringValue","setAllowsOtherFileTypes","setExtensionHidden","html","file","NSString","stringWithString","URL","writeToFile_atomically_encoding_error","NSUTF8StringEncoding","showMessage","MARGIN","LABEL_WIDTH","LABEL_HEIGHT","FIELD_WIDTH","FIELD_HEIGHT","SELECT_HEIGHT","SELECT_WIDTH","currentOffset","ui","label","NSTextField","initWithFrame","setStringValue","setFont","boldSystemFontOfSize","setBezeled","setDrawsBackground","setEditable","setSelectable","addSubview","value","width","height","field","options","comboBox","NSComboBox","addItemsWithObjectValues","selectItemAtIndex","setNumberOfVisibleItems","setCompletes"],"mappings":"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","file":"html-export.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/html-export.js\");\n","import ui from './ui';\n\nexport default function(context) {\n  createExportSettingsWindow(context, exportOpts => {\n    createSavePanel(context, exportOpts);\n  });\n};\n\nlet uniqueTextStyles = {};\n\nfunction parseTextStyles(context) {\n\n  let texts = context.document.documentData().layerTextStyles().objects();\n  let rawTextStyles = [];\n\n  texts.forEach((text, i) => {\n\n    rawTextStyles.push({\n      attributes: text.style().textStyle().attributes(),\n      textStyle: text,\n      name: text.name()\n    });\n  });\n\n  let textStyles = [];\n\n  rawTextStyles.forEach(rawTextStyle => {\n\n    let textStyle = {};\n\n    textStyle.name = rawTextStyle.name;\n    textStyle.fontFamily = rawTextStyle.attributes.NSFont.fontDescriptor().objectForKey(NSFontNameAttribute);\n    textStyle.fontSize = rawTextStyle.attributes.NSFont.fontDescriptor().objectForKey(NSFontSizeAttribute);\n    textStyle.paragraph = rawTextStyle.attributes.NSParagraphStyle;\n\n    if (textStyle.paragraph) {\n      textStyle.lineHeight = textStyle.paragraph.maximumLineHeight();\n    }\n\n    textStyle.letterSpacing = rawTextStyle.attributes.NSKern || 0;\n    textStyle.textTransform = parseInt(rawTextStyle.attributes.MSAttributedStringTextTransformAttribute || 0);\n\n    // @TODO strikethrough & underline, or is this not needed?\n\n    textStyles.push(textStyle);\n  });\n\n  // Sort text styles by size\n  textStyles.sort((a, b) => {\n    return a.fontSize - b.fontSize;\n  });\n\n  return textStyles;\n}\n\nfunction createTextStyleId(textStyle) {\n\n  let textStyleId = '';\n\n  // Make sure this id incorporates every possible property of the text style\n  textStyleId += textStyle.fontFamily;\n  textStyleId += '-'+textStyle.fontSize;\n  textStyleId += '-'+textStyle.lineHeight;\n  textStyleId += '-'+textStyle.letterSpacing;\n  textStyleId += '-'+textStyle.textTransform;\n\n  return textStyleId;\n}\n\nfunction createCssProps(textStyle, exportOpts = {}) {\n\n  exportOpts.cssUnit = exportOpts.cssUnit || 'px';\n  exportOpts.scalingFactor = exportOpts.scalingFactor || 1;\n\n  let cssProps = {};\n\n  cssProps['font-family'] = textStyle.fontFamily;\n  cssProps['font-weight'] = 400;\n  cssProps['line-height'] = 1;\n\n  let fontParts = textStyle.fontFamily.split('-');\n\n  let fontWeightMap = {\n    'Thin': 100,\n    'Light': 300,\n    'Regular': 400,\n    'Medium': 500,\n    'Bold': 700,\n    'Black': 900\n  };\n\n  if (fontParts[1] && fontWeightMap[fontParts[1]]) {\n    cssProps['font-family'] = fontParts[0];\n    cssProps['font-weight'] = fontWeightMap[fontParts[1]];\n  }\n\n  cssProps['font-size'] = (exportOpts.scalingFactor * textStyle.fontSize) + exportOpts.cssUnit;\n  cssProps['letter-spacing'] = (exportOpts.scalingFactor * textStyle.letterSpacing) + exportOpts.cssUnit;\n\n  if (textStyle.textTransform === 1) {\n    cssProps['text-transform'] = 'uppercase';\n  }\n\n  if (textStyle.textTransform === 2) {\n    cssProps['text-transform'] = 'lowercase';\n  }\n\n  if (textStyle.lineHeight) {\n    cssProps['line-height'] = parseFloat(1 + (textStyle.lineHeight - textStyle.fontSize) / textStyle.lineHeight).toFixed(2);\n  }\n\n  return cssProps;\n}\n\nfunction createHtml(textStyles, exportOpts = {}) {\n\n  let output = `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n      <meta charset=\"utf-8\">\n      <title>Typex text styles</title>\n    </head>\n    <body style=\"padding: 0; margin: 0;\">\n  `;\n\n  textStyles.forEach((textStyle, i) => {\n\n    let uniqueId = createTextStyleId(textStyle);\n\n    if (! uniqueTextStyles[uniqueId]) {\n\n      let cssProps = createCssProps(textStyle, exportOpts);\n      let inlineStyleString = createInlineStyleString(cssProps);\n\n      output += `\n        <div style=\"box-shadow: 0 5px 15px #f0f0f0; padding: 25px 50px; border-bottom: 1px solid #ccc;\">\n          <div style=\"font-family: Helvetica, Arial, Sans-Serif; font-size: 14px; margin-bottom: 15px;\">\n            <span>${i+1}.</span>\n            <span>\n              ${textStyle.name}\n            </span>\n            <span style=\"color: #ccc;\">\n              ${inlineStyleString}\n            </span>\n          </div>\n          <div style=\"${inlineStyleString};\">${exportOpts.previewText}</div>\n        </div>\n      `;\n\n      // Add the id to the stack of text styles we've already exported\n      uniqueTextStyles[uniqueId] = true;\n    }\n  });\n\n  output += `\n    </body>\n    </html>\n   `;\n\n  return output;\n}\n\nfunction createInlineStyleString(cssProps) {\n\n  let styleString = '';\n\n  for (let prop in cssProps) {\n    styleString += prop + ': ' + cssProps[prop] +'; ';\n  }\n\n  return styleString;\n}\n\nfunction createExportSettingsWindow(context, cb) {\n\n  let cssUnits = ['px', 'em', 'rem'];\n\n  let alert = NSAlert.alloc().init();\n  let view = NSView.alloc().init();\n\n  let alertIconPath = context.plugin.urlForResourceNamed('icon.png').path();\n  let alertIcon = NSImage.alloc().initByReferencingFile(alertIconPath);\n  alert.setIcon(alertIcon);\n\n  alert.setMessageText('Typex');\n  alert.setInformativeText('Export your text styles to web');\n\n  let labelPreviewText = ui.createLabel(view, 'Preview text');\n  let fieldPreviewText = ui.createField(view, 'The quick brown fox jumps over the lazy dog', 200, 75);\n\n  let labelScalingFactor = ui.createLabel(view, 'Scaling factor');\n  let fieldScalingFactor = ui.createField(view, '1');\n\n  let labelCssUnit = ui.createLabel(view, 'CSS unit');\n  let selectCssUnit = ui.createSelect(view, cssUnits);\n\n  let btnExport = alert.addButtonWithTitle('Export');\n  let btnCancel = alert.addButtonWithTitle('Cancel');\n\n  view.frame = NSMakeRect(0, 0, 400, ui.getCurrentOffset());\n  alert.accessoryView = view;\n\n  let responseCode = alert.runModal();\n\n  if (responseCode === 1000) {\n\n    let exportOpts = {\n      cssUnit: cssUnits[selectCssUnit.indexOfSelectedItem()],\n      scalingFactor: parseFloat(fieldScalingFactor.stringValue().replace(',', '.')),\n      previewText: fieldPreviewText.stringValue()\n    };\n\n    cb(exportOpts);\n  }\n}\n\nfunction createSavePanel(context, exportOpts = {}) {\n\n  let save = NSSavePanel.savePanel();\n  save.setNameFieldStringValue('typex-text-styles.html');\n  save.setAllowsOtherFileTypes(false);\n  save.setExtensionHidden(false);\n\n  if (save.runModal()) {\n\n    let html = createHtml(parseTextStyles(context), exportOpts);\n\n    let file = NSString.stringWithString(html);\n    let path = save.URL().path();\n\n    file.writeToFile_atomically_encoding_error(path, true, NSUTF8StringEncoding, null);\n\n    context.document.showMessage('File saved!');\n  }\n}","const MARGIN = 10;\n\nconst LABEL_WIDTH = 150;\nconst LABEL_HEIGHT = 22;\n\nconst FIELD_WIDTH = 50;\nconst FIELD_HEIGHT = 22;\n\nconst SELECT_HEIGHT = 28;\nconst SELECT_WIDTH = 50;\n\nlet currentOffset = 0;\n\nconst ui = {\n  createLabel: (view, text) => {\n\n    let frame = NSMakeRect(0, currentOffset, LABEL_WIDTH, LABEL_HEIGHT);\n    let label = NSTextField.alloc().initWithFrame(frame);\n\n    label.setStringValue(text);\n    label.setFont(NSFont.boldSystemFontOfSize(12));\n    label.setBezeled(false);\n    label.setDrawsBackground(false);\n    label.setEditable(false);\n    label.setSelectable(false);\n\n    view.addSubview(label);\n    // currentOffset = currentOffset + LABEL_HEIGHT;\n\n    return label;\n  },\n  createField: (view, value, width = FIELD_WIDTH, height = FIELD_HEIGHT) => {\n\n    let frame = NSMakeRect(LABEL_WIDTH, currentOffset, width, height);\n    let field = NSTextField.alloc().initWithFrame(frame);\n    field.setStringValue(value);\n\n    view.addSubview(field);\n    currentOffset = currentOffset + height + MARGIN;\n\n    return field;\n  },\n  createSelect: (view, options) => {\n\n    let frame = NSMakeRect(LABEL_WIDTH, currentOffset, SELECT_WIDTH, SELECT_HEIGHT);\n    let comboBox = NSComboBox.alloc().initWithFrame(frame);\n\n    comboBox.addItemsWithObjectValues(options);\n    comboBox.selectItemAtIndex(0);\n    comboBox.setNumberOfVisibleItems(16);\n    comboBox.setCompletes(1);\n\n    view.addSubview(comboBox);\n    currentOffset = currentOffset + SELECT_HEIGHT + MARGIN;\n\n    return comboBox;\n  },\n  getCurrentOffset: () => {\n    return currentOffset;\n  }\n};\n\nexport default ui;"],"sourceRoot":""}