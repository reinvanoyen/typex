var that=this;function __skpm_run(e,t){that.context=t;var n=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/html-fontbook-export.js")}({"./src/html-fontbook-export.js":
/*!*************************************!*\
  !*** ./src/html-fontbook-export.js ***!
  \*************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./util/ui */"./src/util/ui.js"),a=n(/*! ./util/export */"./src/util/export.js"),i=n(/*! ./util/sketch */"./src/util/sketch.js");t.default=function(e){r.default.createSettingsDialog(e,{title:"Create HTML fontbook",informativeText:"Create a handy HTML fontbook from your text styles",confirmBtnText:"Export HTML fontbook"},[{type:"multicheckbox",id:"excludeProps",label:"Exclude properties (merges text styles)",values:["Color","Line height"]},{type:"select",id:"cssUnit",options:["px","em","rem"],label:"Css unit"},{type:"text",id:"scalingFactor",value:1,label:"Size scaling factor"},{type:"text",id:"maxDecimalPlaces",value:2,label:"Maximal decimal places"},{type:"text",id:"textStyleNamingPrefix",value:"type",label:"Text style naming prefix"},{type:"select",id:"textStyleNamingConvention",options:["Numeric + text style name","Numeric","Text style name"],label:"Text style naming convention"},{type:"text",id:"previewText",value:"The quick brown fox jumps over the lazy dog",label:"Preview text"}],function(t){var n=[];t.excludeProps.Color&&n.push("color"),t.excludeProps["Line height"]&&n.push("lineHeight");var o=i.default.getTextStyles(e);o=a.default.sortTextStyles(o),o=a.default.excludeTextStyleProperties(o,n),o=a.default.removeDoubleTextStyles(o);var l=a.default.createHtmlFontbook(o,t);r.default.createSavePanel("typex-fontbook.html",l)})}},"./src/util/export.js":
/*!****************************!*\
  !*** ./src/util/export.js ***!
  \****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./util */"./src/util/util.js"),a=n(/*! ./number */"./src/util/number.js"),i={sortTextStyles:function(e){return e.sort(function(e,t){return e.fontSize-t.fontSize}),e},excludeTextStyleProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach(function(e){t.forEach(function(t){e[t]&&delete e[t]})}),e},removeDoubleTextStyles:function(e){var t={},n=[];return e.forEach(function(e,a){var i=r.default.createTextStyleId(e);t[i]||(t[i]=!0,n.push(e))}),n},createCssProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.cssUnit=t.cssUnit||0,t.scalingFactor=t.scalingFactor||1,t.maxDecimalPlaces=t.maxDecimalPlaces||2;var n={};n["font-family"]=e.fontFamily,n["font-weight"]=400,n["text-transform"]="none";var r=e.fontFamily.split("-"),o={Thin:100,Light:300,Regular:400,Medium:500,Bold:700,Black:900};return r[1]&&o[r[1]]&&(n["font-family"]=r[0],n["font-weight"]=o[r[1]]),n["font-size"]=a.default.parseFloatMaxDecimal(t.scalingFactor*e.fontSize,t.maxDecimalPlaces)+t.cssUnit,n["letter-spacing"]=a.default.parseFloatMaxDecimal(t.scalingFactor*e.letterSpacing,t.maxDecimalPlaces)+t.cssUnit,1===e.textTransform&&(n["text-transform"]="uppercase"),2===e.textTransform&&(n["text-transform"]="lowercase"),e.lineHeight&&(n["line-height"]=a.default.parseFloatMaxDecimal(1+(e.lineHeight-e.fontSize)/e.lineHeight,t.maxDecimalPlaces)),e.color&&(n.color=i.createRgbaString(e.color)),n},createRgbaString:function(e){return"rgba("+i.createColorValue(e.r)+","+i.createColorValue(e.g)+","+i.createColorValue(e.b)+","+e.a+")"},createColorValue:function(e){return Math.round(255*e)},createStyleBlock:function(e){var t="";for(var n in e)t+="\t"+n+": "+e[n]+";\n";return t},createInlineStyleString:function(e){var t="";for(var n in e)t+=n+": "+e[n]+"; ";return t},createHtmlFontbook:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n='\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="utf-8">\n        <title>Typex text styles</title>\n      </head>\n      <body style="padding: 0; margin: 0;">\n    ';return e.forEach(function(e,a){r.default.createTextStyleId(e);var o,l=i.createCssProps(e,t),c=i.createInlineStyleString(l);o="Numeric"===t.textStyleNamingConvention?t.textStyleNamingPrefix+" "+(a+1):"Text style name"===t.textStyleNamingConvention?t.textStyleNamingPrefix+" "+e.name:t.textStyleNamingPrefix+" "+(a+1)+" ("+e.name+")",n+='\n        <div style="box-shadow: 0 5px 15px #f0f0f0; padding: 25px 50px; border-bottom: 1px solid #ccc;">\n          <div style="font-family: Helvetica, Arial, Sans-Serif; font-size: 14px; margin-bottom: 15px;">\n            <span>'.concat(a+1,".</span>\n            <span>\n              ").concat(o,'\n            </span>\n            <span style="color: #ccc;">\n              ').concat(c,'\n            </span>\n          </div>\n          <div style="').concat(c,';">').concat(t.previewText,"</div>\n        </div>\n      ")}),n+="\n      </body>\n      </html>\n    "}};t.default=i},"./src/util/number.js":
/*!****************************!*\
  !*** ./src/util/number.js ***!
  \****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r={parseFloatMaxDecimal:function(e,t){return Number(e.toFixed(t).replace(/[.,]00$/,""))}};t.default=r},"./src/util/sketch.js":
/*!****************************!*\
  !*** ./src/util/sketch.js ***!
  \****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r={getTextStyles:function(e){var t=[];e.document.documentData().layerTextStyles().objects().forEach(function(e,n){t.push({attributes:e.style().textStyle().attributes(),textStyle:e,name:e.name()})});var n=[];return t.forEach(function(e){var t={};t.name=e.name,t.fontFamily=String(e.attributes.NSFont.fontDescriptor().objectForKey(NSFontNameAttribute)),t.fontSize=e.attributes.NSFont.fontDescriptor().objectForKey(NSFontSizeAttribute),t.paragraph=e.attributes.NSParagraphStyle,t.paragraph&&(t.lineHeight=t.paragraph.maximumLineHeight());var r=e.attributes.MSAttributedStringColorAttribute;if(r){var a=r.red(),i=r.green(),o=r.blue(),l=r.alpha();t.color={r:a,g:i,b:o,a:l}}t.letterSpacing=e.attributes.NSKern||0,t.textTransform=parseInt(e.attributes.MSAttributedStringTextTransformAttribute||0),n.push(t)}),n}};t.default=r},"./src/util/ui.js":
/*!************************!*\
  !*** ./src/util/ui.js ***!
  \************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r={createSavePanel:function(e,t){var n=NSSavePanel.savePanel();if(n.setNameFieldStringValue(e),n.setAllowsOtherFileTypes(!1),n.setExtensionHidden(!1),n.runModal()){var r=NSString.stringWithString(t),a=n.URL().path();r.writeToFile_atomically_encoding_error(a,!0,NSUTF8StringEncoding,null)}},createLabel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=NSTextField.alloc().init();return t.setStringValue(e),t.setFont(NSFont.boldSystemFontOfSize(12)),t.setBezeled(!1),t.setDrawsBackground(!1),t.setEditable(!1),t.setSelectable(!1),t},createTextField:function(e){var t=NSTextField.alloc().init();return t.setStringValue(e),t},createSelect:function(e){var t=NSPopUpButton.alloc().init();return t.addItemsWithTitles(e),t.selectItemAtIndex(0),t},createStepper:function(e){return NSStepper.alloc().init()},createCheckbox:function(e){var t=NSButton.alloc().init();return t.setButtonType(NSSwitchButton),t.title=e,t},createSettingsDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;t.title=t.title||"Alert",t.informativeText=t.informativeText||"",t.cancelBtnText=t.cancelBtnText||"Cancel",t.confirmBtnText=t.confirmBtnText||"Ok";var i=NSAlert.alloc().init(),o=e.plugin.urlForResourceNamed("icon.png").path(),l=NSImage.alloc().initByReferencingFile(o);i.setIcon(l),i.setMessageText(t.title),i.setInformativeText(t.informativeText);i.addButtonWithTitle(t.confirmBtnText),i.addButtonWithTitle(t.cancelBtnText);var c=NSGridView.alloc().init(),s={},u=0;if(n.forEach(function(e){var t,n;switch(e.type){case"text":t=r.createLabel(e.label),n=r.createTextField(e.value),u+=30,c.addRowWithViews([t,n]);break;case"stepper":t=r.createLabel(e.label),n=r.createStepper(e.value),u+=30,c.addRowWithViews([t,n]);break;case"checkbox":t=r.createLabel(e.label),n=r.createCheckbox(),u+=30,c.addRowWithViews([t,n]);break;case"multicheckbox":n=[],e.values.forEach(function(a,i){t=i?r.createLabel():r.createLabel(e.label);var o=r.createCheckbox(a);u+=30,n.push(o),c.addRowWithViews([t,o])});break;case"select":t=r.createLabel(e.label),n=r.createSelect(e.options),u+=36,c.addRowWithViews([t,n])}s[e.id]=n}),i.accessoryView=c,c.columnSpacing=30,c.rowSpacing=8,c.frame=NSMakeRect(0,0,400,u),1e3===i.runModal()){var f={};return n.forEach(function(e){switch(e.type){case"text":f[e.id]=s[e.id].stringValue();break;case"select":f[e.id]=e.options[s[e.id].indexOfSelectedItem()];break;case"checkbox":break;case"multicheckbox":var t={};e.values.forEach(function(n,r){t[n]=1===s[e.id][r].state()}),f[e.id]=t}}),void a(f)}return i}};t.default=r},"./src/util/util.js":
/*!**************************!*\
  !*** ./src/util/util.js ***!
  \**************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);t.default={createTextStyleId:function(e){var t="";return t+=e.fontFamily,t+="-"+e.fontSize,t+="-"+e.letterSpacing,t+="-"+e.textTransform,e.lineHeight&&(t+="-"+e.lineHeight),e.color&&(t+="-"+e.color.r+"-"+e.color.g+"-"+e.color.b+"-"+e.color.a),t}}}});"default"===e&&"function"==typeof n?n(t):n[e](t)}that.onRun=__skpm_run.bind(this,"default");